import{a as R,g as E,r as q,c as g,h as p,D as ge,B as be,ad as Se,E as ye,F as K,G as U,H as j,I as he,J as L,s as F,K as J,N as Ce,u as xe,w as Ve,T as Pe,ae as qe,d as B,af as ie,W as we,X as O,ag as se,f as Ne,j as Ae,ah as _e,U as Ie,a0 as ke,a1 as Te,a4 as Z,a5 as ee,a6 as T,a7 as x,a8 as y,ai as _,aj as V,ac as I,ab as k,ak as De,aa as Be}from"./index-DstSLrEY.js";import{g as te,s as ae,Q as Qe}from"./touch-CO5mu2pS.js";import{c as Ue,_ as $e,d as Me}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-BAMRnORH.js";import{u as Le,Q as Re,R as Ee}from"./useUserStore-C_mEXVK1.js";import{N as ne,S as W,a as ze}from"./utils-CvxIWILl.js";import{V as w,F as D}from"./validator-DbBqJsp8.js";import"./index-B1hcKvQO.js";const ue=R({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:n}){const{proxy:{$q:l}}=E(),c=q(null),i=g(()=>e.stepper.modelValue===e.step.name),t=g(()=>{const a=e.step.disable;return a===!0||a===""}),o=g(()=>{const a=e.step.error;return a===!0||a===""}),u=g(()=>{const a=e.step.done;return t.value===!1&&(a===!0||a==="")}),d=g(()=>{const a=e.step.headerNav,f=a===!0||a===""||a===void 0;return t.value===!1&&e.stepper.headerNav&&f}),h=g(()=>e.step.prefix&&(i.value===!1||e.stepper.activeIcon==="none")&&(o.value===!1||e.stepper.errorIcon==="none")&&(u.value===!1||e.stepper.doneIcon==="none")),v=g(()=>{const a=e.step.icon||e.stepper.inactiveIcon;if(i.value===!0){const f=e.step.activeIcon||e.stepper.activeIcon;return f==="none"?a:f||l.iconSet.stepper.active}if(o.value===!0){const f=e.step.errorIcon||e.stepper.errorIcon;return f==="none"?a:f||l.iconSet.stepper.error}if(t.value===!1&&u.value===!0){const f=e.step.doneIcon||e.stepper.doneIcon;return f==="none"?a:f||l.iconSet.stepper.done}return a}),S=g(()=>{const a=o.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(i.value===!0){const f=e.step.activeColor||e.stepper.activeColor||e.step.color;return f!==void 0?f:a}return a!==void 0?a:t.value===!1&&u.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),m=g(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(S.value!==void 0?` text-${S.value}`:"")+(o.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(h.value===!0?"prefix":"icon"):"")+(i.value===!0?" q-stepper__tab--active":"")+(u.value===!0?" q-stepper__tab--done":"")+(d.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),P=g(()=>e.stepper.headerNav!==!0?!1:d.value);function C(){var a;(a=c.value)==null||a.focus(),i.value===!1&&e.goToPanel(e.step.name)}function r(a){a.keyCode===13&&i.value===!1&&e.goToPanel(e.step.name)}return()=>{const a={class:m.value};d.value===!0&&(a.onClick=C,a.onKeyup=r,Object.assign(a,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:n.tabindex||0}));const f=[p("div",{class:"q-focus-helper",tabindex:-1,ref:c}),p("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[p("span",{class:"row flex-center"},[h.value===!0?e.step.prefix:p(ge,{name:v.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const A=[p("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&A.push(p("div",{class:"q-stepper__caption"},e.step.caption)),f.push(p("div",{class:"q-stepper__label q-stepper__line relative-position"},A))}return be(p("div",a,f),[[Se,P.value]])}}});function Ke(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((l,c)=>{const i=parseFloat(l);i&&(n[c]=i)}),n}const je=ye({name:"touch-swipe",beforeMount(e,{value:n,arg:l,modifiers:c}){if(c.mouse!==!0&&U.has.touch!==!0)return;const i=c.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:Ke(l),direction:te(c),noop:he,mouseStart(o){ae(o,t)&&Ce(o)&&(L(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(o,!0))},touchStart(o){if(ae(o,t)){const u=o.target;L(t,"temp",[[u,"touchmove","move","notPassiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),t.start(o)}},start(o,u){U.is.firefox===!0&&j(e,!0);const d=J(o);t.event={x:d.left,y:d.top,time:Date.now(),mouse:u===!0,dir:!1}},move(o){if(t.event===void 0)return;if(t.event.dir!==!1){F(o);return}const u=Date.now()-t.event.time;if(u===0)return;const d=J(o),h=d.left-t.event.x,v=Math.abs(h),S=d.top-t.event.y,m=Math.abs(S);if(t.event.mouse!==!0){if(v<t.sensitivity[1]&&m<t.sensitivity[1]){t.end(o);return}}else if(window.getSelection().toString()!==""){t.end(o);return}else if(v<t.sensitivity[2]&&m<t.sensitivity[2])return;const P=v/u,C=m/u;t.direction.vertical===!0&&v<m&&v<100&&C>t.sensitivity[0]&&(t.event.dir=S<0?"up":"down"),t.direction.horizontal===!0&&v>m&&m<100&&P>t.sensitivity[0]&&(t.event.dir=h<0?"left":"right"),t.direction.up===!0&&v<m&&S<0&&v<100&&C>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&v<m&&S>0&&v<100&&C>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&v>m&&h<0&&m<100&&P>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&v>m&&h>0&&m<100&&P>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(F(o),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ue(),t.styleCleanup=r=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const a=()=>{document.body.classList.remove("no-pointer-events--children")};r===!0?setTimeout(a,50):a()}),t.handler({evt:o,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:u,distance:{x:v,y:m}})):t.end(o)},end(o){var u;t.event!==void 0&&(K(t,"temp"),U.is.firefox===!0&&j(e,!1),(u=t.styleCleanup)==null||u.call(t,!0),o!==void 0&&t.event.dir!==!1&&F(o),t.event=void 0)}};if(e.__qtouchswipe=t,c.mouse===!0){const o=c.mouseCapture===!0||c.mousecapture===!0?"Capture":"";L(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}U.has.touch===!0&&L(t,"main",[[e,"touchstart","touchStart",`passive${c.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const l=e.__qtouchswipe;l!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&l.end(),l.handler=n.value),l.direction=te(n.modifiers))},beforeUnmount(e){var l;const n=e.__qtouchswipe;n!==void 0&&(K(n,"main"),K(n,"temp"),U.is.firefox===!0&&j(e,!1),(l=n.styleCleanup)==null||l.call(n),delete e.__qtouchswipe)}});function de(){let e=Object.create(null);return{getCache:(n,l)=>e[n]===void 0?e[n]=typeof l=="function"?l():l:e[n],setCache(n,l){e[n]=l},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const Fe={name:{required:!0},disable:Boolean},re={setup(e,{slots:n}){return()=>p("div",{class:"q-panel scroll",role:"tabpanel"},B(n.default))}},Oe={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},We=["update:modelValue","beforeTransition","transition"];function Xe(){const{props:e,emit:n,proxy:l}=E(),{getCache:c}=de(),{registerTimeout:i}=xe();let t,o;const u=q(null),d={value:null};function h(s){const b=e.vertical===!0?"up":"left";Q((l.$q.lang.rtl===!0?-1:1)*(s.direction===b?1:-1))}const v=g(()=>[[je,h,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),S=g(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),m=g(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),P=g(()=>`--q-transition-duration: ${e.transitionDuration}ms`),C=g(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),r=g(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),a=g(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Ve(()=>e.modelValue,(s,b)=>{const N=$(s)===!0?z(s):-1;o!==!0&&H(N===-1?0:N<z(b)?-1:1),d.value!==N&&(d.value=N,n("beforeTransition",s,b),i(()=>{n("transition",s,b)},e.transitionDuration))});function f(){Q(1)}function A(){Q(-1)}function X(s){n("update:modelValue",s)}function $(s){return s!=null&&s!==""}function z(s){return t.findIndex(b=>b.props.name===s&&b.props.disable!==""&&b.props.disable!==!0)}function ve(){return t.filter(s=>s.props.disable!==""&&s.props.disable!==!0)}function H(s){const b=s!==0&&e.animated===!0&&d.value!==-1?"q-transition--"+(s===-1?S.value:m.value):null;u.value!==b&&(u.value=b)}function Q(s,b=d.value){let N=b+s;for(;N!==-1&&N<t.length;){const M=t[N];if(M!==void 0&&M.props.disable!==""&&M.props.disable!==!0){H(s),o=!0,n("update:modelValue",M.props.name),setTimeout(()=>{o=!1});return}N+=s}e.infinite===!0&&t.length!==0&&b!==-1&&b!==t.length&&Q(s,s===-1?t.length:-1)}function Y(){const s=z(e.modelValue);return d.value!==s&&(d.value=s),!0}function G(){const s=$(e.modelValue)===!0&&Y()&&t[d.value];return e.keepAlive===!0?[p(ie,r.value,[p(a.value===!0?c(C.value,()=>({...re,name:C.value})):re,{key:C.value,style:P.value},()=>s)])]:[p("div",{class:"q-panel scroll",style:P.value,key:C.value,role:"tabpanel"},[s])]}function pe(){if(t.length!==0)return e.animated===!0?[p(Pe,{name:u.value},G)]:G()}function me(s){return t=qe(B(s.default,[])).filter(b=>b.props!==null&&b.props.slot===void 0&&$(b.props.name)===!0),t.length}function fe(){return t}return Object.assign(l,{next:f,previous:A,goTo:X}),{panelIndex:d,panelDirectives:v,updatePanelsList:me,updatePanelIndex:Y,getPanelContent:pe,getEnabledPanels:ve,getPanels:fe,isValidPanelName:$,keepAliveProps:r,needsUniqueKeepAliveWrapper:a,goToPanelByOffset:Q,goToPanel:X,nextPanel:f,previousPanel:A}}function ce(e){return p("div",{class:"q-stepper__step-content"},[p("div",{class:"q-stepper__step-inner"},B(e.default))])}const oe={setup(e,{slots:n}){return()=>ce(n)}},le=R({name:"QStep",props:{...Fe,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:n,emit:l}){const{proxy:{$q:c}}=E(),i=we(se,O);if(i===O)return console.error("QStep needs to be a child of QStepper"),O;const{getCache:t}=de(),o=q(null),u=g(()=>i.value.modelValue===e.name),d=g(()=>c.platform.is.ios!==!0&&c.platform.is.chrome===!0||u.value!==!0||i.value.vertical!==!0?{}:{onScroll(S){const{target:m}=S;m.scrollTop>0&&(m.scrollTop=0),e.onScroll!==void 0&&l("scroll",S)}}),h=g(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function v(){const S=i.value.vertical;return S===!0&&i.value.keepAlive===!0?p(ie,i.value.keepAliveProps.value,u.value===!0?[p(i.value.needsUniqueKeepAliveWrapper.value===!0?t(h.value,()=>({...oe,name:h.value})):oe,{key:h.value},n.default)]:void 0):S!==!0||u.value===!0?ce(n):void 0}return()=>p("div",{ref:o,class:"q-stepper__step",role:"tabpanel",...d.value},i.value.vertical===!0?[p(ue,{stepper:i.value,step:e,goToPanel:i.value.goToPanel}),i.value.animated===!0?p(Qe,v):v()]:[v()])}}),He=R({name:"QStepperNavigation",setup(e,{slots:n}){return()=>p("div",{class:"q-stepper__nav"},B(n.default))}}),Ye=/(-\w)/g;function Ge(e){const n={};for(const l in e){const c=l.replace(Ye,i=>i[1].toUpperCase());n[c]=e[l]}return n}const Je=R({name:"QStepper",props:{...Ne,...Oe,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:We,setup(e,{slots:n}){const l=E(),c=Ae(e,l.proxy.$q),{updatePanelsList:i,isValidPanelName:t,updatePanelIndex:o,getPanelContent:u,getPanels:d,panelDirectives:h,goToPanel:v,keepAliveProps:S,needsUniqueKeepAliveWrapper:m}=Xe();_e(se,g(()=>({goToPanel:v,keepAliveProps:S,needsUniqueKeepAliveWrapper:m,...e})));const P=g(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(c.value===!0?" q-stepper--dark q-dark":"")),C=g(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function r(){const a=B(n.message,[]);if(e.vertical===!0){t(e.modelValue)&&o();const f=p("div",{class:"q-stepper__content"},B(n.default));return a===void 0?[f]:a.concat(f)}return[p("div",{class:C.value},d().map(f=>{const A=Ge(f.props);return p(ue,{key:A.name,stepper:e,step:A,goToPanel:v})})),a,ke("div",{class:"q-stepper__content q-panel-parent"},u(),"cont",e.swipeable,()=>h.value)]}return()=>(i(n),p("div",{class:P.value},Ie(n.navigation,r())))}}),Ze={class:"q-pa-md"},it=Te({__name:"SegmentsPage",setup(e){const n=q(1),l=q(""),c=q(),i=q(),t=q(),o=q(),u=q(),d=q(),h=Le(),v=q(!1),S=async()=>{W.show("Criando...");const C=localStorage.getItem("accessToken");try{const r=new Ee(C,c.value,i.value,t.value,o.value,u.value,l.value,null,d.value),a=await h.createReport(r);await ze.show("Sucesso","Relatório criado com sucesso!"),await W.hide(""),console.log(a)}catch(r){await W.hide(""),ne.error(r.message)}},m=()=>{console.log(w.isValidNumber(d.value.toString())),n.value===1&&l.value&&w.isValidNumber(d.value.toString())?n.value=2:n.value===2?S():ne.error("Preencha todos os campos obrigatórios.")},P=()=>n.value===1&&l.value&&w.isValidNumber(d.value.toString())||n.value===2?"primary":"grey";return(C,r)=>(ee(),Z(Me,null,{default:T(()=>[x(Re,{class:"q-pa-md"},{default:T(()=>[x(Je,{modelValue:n.value,"onUpdate:modelValue":r[9]||(r[9]=a=>n.value=a),vertical:"",color:"primary",animated:"","transition-duration":"500",class:"default-box-shadow big-border-radius"},{default:T(()=>[x(le,{name:1,title:"Dados",icon:"settings",done:n.value>1,caption:"Obrigatório",class:"column justify-content"},{default:T(()=>[r[10]||(r[10]=y("p",{class:"text-h6 text-bold"},"Informações",-1)),y("div",null,[x(_,{dense:"",outlined:"",modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=a=>l.value=a),modelModifiers:{trim:!0},label:"Nome da cidade","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidName(a)||"Campo obrigatório"]},null,8,["modelValue","rules"]),x(_,{dense:"",outlined:"",modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=a=>c.value=a),modelModifiers:{trim:!0},label:"Temperatura Média Diaria",suffix:"°C","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidNumber(V(D).clearSymbolsAndLetters(a))||"Número inválido"]},null,8,["modelValue","rules"]),x(_,{dense:"",outlined:"",modelValue:i.value,"onUpdate:modelValue":r[2]||(r[2]=a=>i.value=a),modelModifiers:{trim:!0},label:"Umidade Relativa do Ar",suffix:"%","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidNumber(V(D).clearSymbolsAndLetters(a))||"Número inválido"]},null,8,["modelValue","rules"]),x(_,{dense:"",outlined:"",modelValue:t.value,"onUpdate:modelValue":r[3]||(r[3]=a=>t.value=a),modelModifiers:{trim:!0},label:"Precipitação",suffix:"mm","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidNumber(V(D).clearSymbolsAndLetters(a))||"Número inválido"]},null,8,["modelValue","rules"]),x(_,{dense:"",outlined:"",modelValue:o.value,"onUpdate:modelValue":r[4]||(r[4]=a=>o.value=a),modelModifiers:{trim:!0},label:"Indice Umidade do Solo",suffix:"%","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidNumber(V(D).clearSymbolsAndLetters(a))||"Número inválido"]},null,8,["modelValue","rules"]),x(_,{dense:"",outlined:"",modelValue:u.value,"onUpdate:modelValue":r[5]||(r[5]=a=>u.value=a),modelModifiers:{trim:!0},label:"Indice de vegetação",suffix:"NDVI","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidNumber(V(D).clearSymbolsAndLetters(a))||"Número inválido"]},null,8,["modelValue","rules"]),x(_,{dense:"",outlined:"",modelValue:d.value,"onUpdate:modelValue":r[6]||(r[6]=a=>d.value=a),modelModifiers:{trim:!0},label:"Area Queimada",suffix:"ha","lazy-rules":"",class:"half-width",rules:[a=>V(w).isValidNumber(V(D).clearSymbolsAndLetters(a))||"Número inválido"]},null,8,["modelValue","rules"])])]),_:1},8,["done"]),x(le,{name:2,title:"Criar Polo",icon:"check"},{default:T(()=>[r[18]||(r[18]=y("p",{class:"text-h6 text-bold q-mb-md"},"Conclusão",-1)),y("div",Ze,[y("p",null,[r[11]||(r[11]=y("strong",null,"Nome da cidade:",-1)),I(" "+k(l.value),1)]),y("p",null,[r[12]||(r[12]=y("strong",null,"Temperatura Média Diária:",-1)),I(" "+k(c.value)+" °C ",1)]),y("p",null,[r[13]||(r[13]=y("strong",null,"Umidade Relativa do Ar:",-1)),I(" "+k(i.value)+" % ",1)]),y("p",null,[r[14]||(r[14]=y("strong",null,"Precipitação:",-1)),I(" "+k(t.value)+" mm",1)]),y("p",null,[r[15]||(r[15]=y("strong",null,"Índice Umidade do Solo:",-1)),I(" "+k(o.value)+" % ",1)]),y("p",null,[r[16]||(r[16]=y("strong",null,"Índice de Vegetação:",-1)),I(" "+k(u.value)+" NDVI ",1)]),y("p",null,[r[17]||(r[17]=y("strong",null,"Área Queimada:",-1)),I(" "+k(d.value)+" ha",1)])]),r[19]||(r[19]=y("div",{class:"text-h6 text-center"}," Você confirma que todos os dados fornecidos estão corretos? ",-1))]),_:1}),x(He,{class:"text-center"},{default:T(()=>[n.value>1?(ee(),Z($e,{key:0,flat:"",onClick:r[7]||(r[7]=a=>n.value--),label:"Voltar"})):De("",!0),x(Be,{onClick:r[8]||(r[8]=a=>m()),color:P(),label:n.value===3?"Confirmar":"Continuar",loading:v.value},null,8,["color","label","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{it as default};
